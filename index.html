<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Monitoring RPP PDAM</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Tombol Menu Hamburger -->
  <div id="menuToggle" onclick="toggleMenu()">☰</div>
  <div id="menu" class="hidden">
    <button onclick="showPage('formPage')">🏠 Halaman Utama</button>
    <button onclick="showPage('riwayatPage')">📄 Riwayat & Upload Ulang</button>
  </div>

  <!-- HALAMAN UTAMA -->
  <div id="formPage" class="page">
    <div class="logo-pdam">
      <img src="pdam logo.jpg" alt="Logo PDAM">
    </div>

    <h2>Monitoring RPP PDAM</h2>

    <label>Nama Petugas:</label>
    <input type="text" id="nama" placeholder="Contoh: Irsyad Muhammad" />

    <label>Nomor Pelanggan:</label>
    <input type="text" id="nomorPelanggan" placeholder="Contoh: 11010001" onblur="lookupPelanggan()" />

    <button onclick="startQRScan()">📷 Scan QR</button>

    <div class="lookup-result">
      <p><strong>Nama:</strong> <span id="namaPelanggan">-</span></p>
      <p><strong>Alamat:</strong> <span id="alamatPelanggan">-</span></p>
      <p><strong>Kelurahan:</strong> <span id="kelurahanPelanggan">-</span></p>
      <p><strong>RT / RW:</strong> <span id="rtrwPelanggan">-</span></p>
      <p><strong>Golongan:</strong> <span id="golonganPelanggan">-</span></p>
      <p><strong>No Water Meter:</strong> <span id="meterPelanggan">-</span></p>
    </div>

    <label>Foto Rumah:</label>
    <input type="file" id="foto" accept="image/*" capture="environment" />

    <label>Catatan Petugas:</label>
    <input type="text" id="catatan" placeholder="Misal: Pelanggan akan membayar pada 20 juni jika tidak disegel, dsb" />

    <button onclick="getLocation()">Ambil Lokasi</button>
    <p id="lokasiText">Lokasi: belum diambil</p>

    <button id="submitBtn" onclick="submitData()">Kirim</button>

    <!-- Tempat muncul QR scanner -->
    <div id="reader" style="display: none;"></div>

    <p class="footer">WebApp ini masih uji coba yang disusun oleh Irsyad</p>
  </div>

  <!-- HALAMAN RIWAYAT -->
  <div id="riwayatPage" class="page" style="display: none;">
    <h2>Riwayat Kunjungan Anda</h2>
    <div id="riwayatList">
      <p>⏳ Memuat data...</p>
    </div>

    <button onclick="uploadSemua()">🔁 Upload Ulang Semua</button>
    <button onclick="tampilkanOfflineLog()">📦 Lihat Data Tertunda (Offline)</button>
    <div id="offlineLog" class="offline-log" style="display: none;"></div>
  </div>

  <script src="main.js"></script>
</body>
</html>
